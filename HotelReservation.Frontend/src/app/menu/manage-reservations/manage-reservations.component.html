<div class="grid">
    <div class="col-12">
        <div class="card px-6 py-6">
            <p-toast></p-toast>

            <div class="grid">
                <div class="col-12">
                    <div class="col-12">
                        <button
                            pButton
                            label="New Booking"
                            icon="pi pi-plus"
                            class="p-button-success mr-2"
                            (click)="create()"
                        ></button>
                        <!-- <button pButton label="Edit or Confirm" icon="pi pi-pencil" class="p-button-success mr-2"
                            (click)="edit(newReservation)"></button> -->
                        <!-- <button pButton pRipple label="Delete" icon="pi pi-trash" class="p-button-danger"
                            (click)="deleteSelected()">
                        </button> -->
                    </div>
                    <div
                        class="col-9 flex flex-column md:flex-row p-1 w-full gap-5"
                    >
                        <span class="block mt-2 md:mt-0 p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input
                                pInputText
                                type="text"
                                #filter
                                (input)="onGlobalFilter(dt1, $event)"
                                placeholder="Voucher No..."
                                class="w-full sm:w-auto"
                            />
                        </span>
                    </div>

                    <div class="col-12">
                        <p-table
                            #dt1
                            [value]="reservations"
                            [columns]="cols"
                            responsiveLayout="scroll"
                            styleClass="p-datatable-striped"
                            [rows]="10"
                            [globalFilterFields]="[
                                'id',
                                'agencyVoucherReference'
                            ]"
                            [rows]="10"
                            [paginator]="true"
                            [rowsPerPageOptions]="[10, 20, 30]"
                            [showCurrentPageReport]="true"
                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                            selectionMode="multiple"
                            [rowHover]="true"
                            dataKey="id"
                        >
                            <ng-template pTemplate="caption">
                                <div
                                    class="flex flex-column md:flex-row md:justify-content-between md:align-items-center"
                                >
                                    <h5 class="m-0">Manage Bookings</h5>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr style="height: 0.25rem; font-size: 12px">
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                            width: 3rem;
                                        "
                                    >
                                        <p-tableheadercheckbox></p-tableheadercheckbox>
                                    </th>
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                        "
                                    >
                                        Voucher No
                                    </th>
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                        "
                                    >
                                        Name
                                    </th>
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                        "
                                    >
                                        CheckIn Date
                                    </th>
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                        "
                                    >
                                        CheckOut Date
                                    </th>
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                        "
                                    >
                                        Total Amount
                                    </th>
                                    <th
                                        style="
                                            font-size: larger;
                                            background-color: grey;
                                            color: white;
                                        "
                                    >
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-reservation>
                                <tr style="height: 0.25rem; font-size: 11px">
                                    <td>
                                        <p-tablecheckbox
                                            [value]="reservation"
                                        ></p-tablecheckbox>
                                    </td>
                                    <td style="width: 10%; min-width: 10rem">
                                        <span class="p-column-title"
                                            >Voucher No</span
                                        >
                                        {{ reservation.id }}
                                    </td>
                                    <td style="width: 15%; min-width: 10rem">
                                        <span class="p-column-title">Name</span>
                                        {{ reservation.firstName }}
                                        {{ reservation.lastName }}
                                    </td>
                                    <td style="width: 10%; min-width: 10rem">
                                        <span class="p-column-title"
                                            >CheckIn</span
                                        >
                                        {{
                                            reservation.checkInDate
                                                | date : "MMMM d, y"
                                        }}
                                    </td>
                                    <td style="width: 10%; min-width: 10rem">
                                        <span class="p-column-title"
                                            >CheckOut</span
                                        >
                                        {{
                                            reservation.checkOutDate
                                                | date : "MMMM d, y"
                                        }}
                                    </td>
                                    <td style="width: 5%; min-width: 10rem">
                                        <span class="p-column-title"
                                            >Amount</span
                                        >
                                        {{ reservation.totalAmount | currency }}
                                    </td>
                                    <td>
                                        <div class="flex">
                                            <button
                                                pButton
                                                pRipple
                                                icon="pi pi-eye"
                                                class="p-button-rounded p-button-primary mr-2"
                                                (click)="view(reservation)"
                                            ></button>
                                            <button
                                                pButton
                                                pRipple
                                                icon="pi pi-pencil"
                                                class="p-button-rounded p-button-success mr-2"
                                                (click)="edit(reservation)"
                                            ></button>
                                            <!-- <button pButton pRipple icon="pi pi-trash"
                                                class="p-button-rounded p-button-danger"
                                                (click)="delete(reservation.id)"></button> -->
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
                <!-------------------------------------------------create modal---------------------------------------->
                <p-dialog
                    [(visible)]="createBookingModal"
                    [style]="{ width: '90%' }"
                    header="New Booking"
                    [modal]="true"
                    class="p-fluid"
                >
                    <ng-template pTemplate="content">
                        <p-tabView orientation="left">
                            <p-tabPanel header="Booking Details" class="line-height-3 m-0">
                                <br>
                                <br>
                                <div class="formgrid grid">
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <input
                                                    type="text"
                                                    pInputText
                                                    id="firstname"
                                                    [(ngModel)]="
                                                        newReservation.firstName
                                                    "
                                                    required
                                                    autofocus
                                                    [ngClass]="{
                                                        'ng-invalid ng-dirty':
                                                            submitted &&
                                                            !newReservation.firstName
                                                    }"
                                                />
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.firstName
                                                    "
                                                    >Item name is
                                                    required.</small
                                                >
                                                <label for="name"
                                                    >Customer First
                                                    Name</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <input
                                                    type="text"
                                                    pInputText
                                                    id="surname"
                                                    [disabled]="
                                                        !newReservation.firstName
                                                    "
                                                    [(ngModel)]="
                                                        newReservation.lastName
                                                    "
                                                    required
                                                    autofocus
                                                    [ngClass]="{
                                                        'ng-invalid ng-dirty':
                                                            submitted &&
                                                            !newReservation.lastName
                                                    }"
                                                />
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.lastName
                                                    "
                                                    >Item name is
                                                    required.</small
                                                >
                                                <label for="name"
                                                    >Last
                                                    Name</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <input
                                                    type="phone"
                                                    pInputText
                                                    id="phone"
                                                    [disabled]="
                                                        !newReservation.lastName
                                                    "
                                                    [(ngModel)]="
                                                        newReservation.phone
                                                    "
                                                    required
                                                    autofocus
                                                    [ngClass]="{
                                                        'ng-invalid ng-dirty':
                                                            submitted &&
                                                            !newReservation.phone
                                                    }"
                                                />
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.phone
                                                    "
                                                    >Item name is
                                                    required.</small
                                                >
                                                <label for="name"
                                                    >Phone</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <input
                                                    type="email"
                                                    pInputText
                                                    id="email"
                                                    [disabled]="
                                                        !newReservation.phone
                                                    "
                                                    [(ngModel)]="
                                                        newReservation.email
                                                    "
                                                    required
                                                    autofocus
                                                    [ngClass]="{
                                                        'ng-invalid ng-dirty':
                                                            submitted &&
                                                            !newReservation.email
                                                    }"
                                                />
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.email
                                                    "
                                                    >Item name is
                                                    required.</small
                                                >
                                                <label for="name"
                                                    >Email</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <input
                                                    type="text"
                                                    pInputText
                                                    id="id"
                                                    [disabled]="
                                                        !newReservation.email
                                                    "
                                                    [(ngModel)]="
                                                        newReservation.idNo
                                                    "
                                                    required
                                                    autofocus
                                                    [ngClass]="{
                                                        'ng-invalid ng-dirty':
                                                            submitted &&
                                                            !newReservation.idNo
                                                    }"
                                                />
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.idNo
                                                    "
                                                    >Item name is
                                                    required.</small
                                                >
                                                <label for="name"
                                                    >ID
                                                    Number</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <input
                                                    type="text"
                                                    pInputText
                                                    id="adress"
                                                    [disabled]="
                                                        !newReservation.idNo
                                                    "
                                                    [(ngModel)]="
                                                        newReservation.address
                                                    "
                                                    required
                                                    autofocus
                                                    [ngClass]="{
                                                        'ng-invalid ng-dirty':
                                                            submitted &&
                                                            !newReservation.address
                                                    }"
                                                />
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.address
                                                    "
                                                    >Item name is
                                                    required.</small
                                                >
                                                <label for="name"
                                                    >Address</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <p-dropdown
                                                    appendTo="body"
                                                    [disabled]="
                                                        !newReservation.address
                                                    "
                                                    [(ngModel)]="
                                                        newReservation.country
                                                    "
                                                    [options]="
                                                        countries
                                                    "
                                                    placeholder="Select Country"
                                                >
                                                    <ng-template
                                                        pTemplate="selectedCountry"
                                                    >
                                                        <span
                                                            *ngIf="
                                                                newReservation &&
                                                                newReservation.country
                                                            "
                                                            >{{
                                                                newReservation.country
                                                            }}
                                                        </span>
                                                    </ng-template>
                                                    <ng-template
                                                        let-option
                                                        pTemplate="item"
                                                    >
                                                        <span>{{
                                                            option
                                                        }}</span>
                                                    </ng-template>
                                                </p-dropdown>
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.country
                                                    "
                                                >
                                                    Item name is
                                                    required.
                                                </small>
                                                <label
                                                    for="country"
                                                >
                                                    Nationality</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <div class="field col-4">
                                        <span class="p-float-label">
                                            <p-calendar
                                                appendTo="body"
                                                [(ngModel)]="
                                                    newReservation.checkInDate
                                                "
                                                dateFormat="MM d, y"
                                            ></p-calendar>
                                            <small
                                                class="ng-dirty ng-invalid"
                                                *ngIf="
                                                    submitted &&
                                                    !newReservation.checkInDate
                                                "
                                                >Date is
                                                required.</small
                                            >
                                            <label
                                                for="creationTime"
                                                >Check In
                                                Date</label
                                            >
                                        </span>
                                    </div>
                                    <div class="field col-4">
                                        <span class="p-float-label">
                                            <p-calendar
                                                appendTo="body"
                                                [(ngModel)]="
                                                    newReservation.checkOutDate
                                                "
                                                dateFormat="MM d, y"
                                            ></p-calendar>
                                            <small
                                                class="ng-dirty ng-invalid"
                                                *ngIf="
                                                    submitted &&
                                                    !newReservation.checkOutDate
                                                "
                                                >Date is
                                                required.</small
                                            >
                                            <label
                                                for="creationTime"
                                                >Check Out
                                                Date</label
                                            >
                                        </span>
                                    </div>
                                </div>
                            </p-tabPanel>
                            <p-tabPanel header="Product Details" class="line-height-3 m-0">
                                <br>
                                <br>
                                <div class="formgrid grid">
                                    <div class="field col-6">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <p-dropdown
                                                    appendTo="body"
                                                    [(ngModel)]="
                                                        newReservationProduct.roomType
                                                    "
                                                    [options]="
                                                        roomTypes
                                                    "
                                                    placeholder="Select Room Type"
                                                >
                                                    <ng-template
                                                        pTemplate="selectedRoomType"
                                                    >
                                                        <span
                                                            *ngIf="
                                                                newReservationProduct &&
                                                                newReservationProduct.roomType
                                                            "
                                                            >{{
                                                                newReservationProduct.roomType
                                                            }}
                                                        </span>
                                                    </ng-template>
                                                    <ng-template
                                                        let-option
                                                        pTemplate="item"
                                                    >
                                                        <span>{{
                                                            option
                                                        }}</span>
                                                    </ng-template>
                                                </p-dropdown>
                                                <small
                                                    class="ng-dirty ng-invalid"
                                                    style="
                                                        color: red;
                                                    "
                                                    *ngIf="
                                                        submitted &&
                                                        !newReservation.country
                                                    "
                                                >
                                                    Item name is
                                                    required.
                                                </small>
                                                <label
                                                    for="country"
                                                >
                                                    Room Type</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="field col-6">
                                        <div class="field">
                                            <span
                                                class="p-float-label"
                                            >
                                                <p-dropdown
                                                    appendTo="body"
                                                    [disabled]="
                                                        !newReservationProduct.roomType
                                                    "
                                                    [(ngModel)]="
                                                        newReservationProduct.room
                                                    "
                                                    inputId="id"
                                                    [showClear]="
                                                        true
                                                    "
                                                    [options]="
                                                        rooms
                                                    "
                                                    placeholder="Select Room No"
                                                    optionLabel="id"
                                                >
                                                </p-dropdown>
                                                <label for="room"
                                                    >Room No</label
                                                >
                                            </span>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="field col-6">
                                        <span class="p-float-label">
                                            <input
                                                type="number"
                                                pInputText
                                                id="pax"
                                                [disabled]="
                                                    !newReservationProduct.room
                                                "
                                                [(ngModel)]="
                                                    newReservationProduct.adultPax
                                                "
                                                required
                                                autofocus
                                                [ngClass]="{
                                                    'ng-invalid ng-dirty':
                                                        submitted &&
                                                        !newReservationProduct.adultPax
                                                }"
                                            />
                                            <small
                                                class="ng-dirty ng-invalid"
                                                style="color: red"
                                                *ngIf="
                                                    submitted &&
                                                    !newReservationProduct.adultPax
                                                "
                                                >Item name is
                                                required.</small
                                            >
                                            <label
                                                for="name"
                                                *ngIf="
                                                    productType !==
                                                    'Accommodation'
                                                "
                                                >Adult Pax</label
                                            >
                                        </span>
                                    </div>
                                    <div class="field col-6">
                                        <span class="p-float-label">
                                            <input
                                                type="number"
                                                pInputText
                                                id="pax"
                                                [disabled]="
                                                    !newReservationProduct.room
                                                "
                                                [(ngModel)]="
                                                    newReservationProduct.childPax
                                                "
                                                required
                                                autofocus
                                                [ngClass]="{
                                                    'ng-invalid ng-dirty':
                                                        submitted &&
                                                        !newReservationProduct.childPax
                                                }"
                                            />
                                            <small
                                                class="ng-dirty ng-invalid"
                                                style="color: red"
                                                *ngIf="
                                                    submitted &&
                                                    !newReservationProduct.childPax
                                                "
                                                >Item name is
                                                required.</small
                                            >
                                            <label
                                                for="name"
                                                *ngIf="
                                                    productType !==
                                                    'Accommodation'
                                                "
                                                >Child Pax</label
                                            >
                                        </span>
                                    </div>
                                </div>
                                <div class="field col-12">
                                    <div class="formgrid grid">
                                        <div class="field col-3">
                                            <button pButton label="Add" icon="pi pi-plus" [disabled]="!newReservationProduct.childPax"
                                                class="p-button-success mr-2" (click)="
                                                addProduct()
                                                "></button>
                                        </div>
                                        <div class="field col-3">
                                            <button pButton pRipple label="Remove" icon="pi pi-minus"
                                                class="p-button-danger" (click)="clearProducts()"></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="formgrid grid">
                                    <div
                                        class="flex flex-column md:flex-row p-3 w-full"
                                    >
                                        <div class="field col-12">
                                            <p-fieldset
                                                legend="Products"
                                            >
                                                <p-table
                                                    dataKey="productName"
                                                    [value]=" newReservation.reservationProducts!"
                                                    [expandedRowKeys]=" expandedRows"
                                                    responsiveLayout="scroll"
                                                    [(selection)]="selectedReservationProducts"
                                                    selectionMode="multiple">
                                                    <!-- reservation products table head -->
                                                    <ng-template pTemplate="header">
                                                        <tr style="height: 0.25rem;font-size: 11px;">
                                                            <th style="font-size: larger;
                                                                    background-color: grey;
                                                                    color: white;">Room Type
                                                            </th>
                                                            <th style="font-size: larger;
                                                                    background-color: grey;
                                                                    color: white;">Room No
                                                            </th>
                                                            <th style="font-size: larger;
                                                                    background-color: grey;
                                                                    color: white;">Adult Pax
                                                            </th>
                                                            <th style="font-size: larger;
                                                                    background-color: grey;
                                                                    color: white;">Child Pax
                                                            </th>
                                                            <th style="font-size: larger;
                                                                    background-color: grey;
                                                                    color: white;">Unit Cost
                                                            </th>
                                                            <th style="font-size: larger;
                                                                    background-color: grey;
                                                                    color: white;">Total Amount
                                                            </th>
                                                            <!-- <th></th> -->
                                                        </tr>
                                                    </ng-template>
                                                    <!-- reservation products table body -->
                                                    <ng-template pTemplate="body"
                                                        let-product>
                                                        <tr style="height: 0.25rem;
                                                                font-size: 11px;">
                                                            <td style="width: 10%;min-width: 10rem;">
                                                                <span class="p-column-title">Room Type</span
                                                                >
                                                                {{product.roomType}}
                                                            </td>
                                                            <td style="width: 5%; min-width: 10rem;">
                                                                <span class="p-column-title">Room</span>
                                                                {{product.roomId}}
                                                            </td>
                                                            <td style="width: 5%;min-width: 10rem;">
                                                                <span class="p-column-title">AdultPax</span>
                                                                {{product.adultPax}}
                                                            </td>
                                                            <td style="width: 5%;min-width: 10rem;">
                                                                <span class="p-column-title">child</span>
                                                                {{product.childPax}}
                                                            </td>
                                                            <td style="width: 5%;min-width: 8rem;">
                                                                <span class="p-column-title">UnitCost</span>
                                                                {{product.unitPrice | currency}}
                                                            </td>
                                                            <td style="width: 10%;min-width: 10rem;">
                                                                <span class="p-column-title">TotalAmount</span>
                                                                {{product.totalAmount | currency}}
                                                            </td>
                                                        </tr>
                                                    </ng-template>
                                                </p-table>
                                                <!-- reservation products table totals -->
                                                <div class="field">
                                                    <div class="formgrid grid">
                                                        <div class="col-8"></div>
                                                        <div class="col-4">
                                                            <p-table>
                                                                <ng-template pTemplate="header">
                                                                    <tr>
                                                                        <td style="width: 20%;
                                                                                min-width: 10rem;">
                                                                            Total
                                                                            USD
                                                                        </td>
                                                                        <td style="width: 20%;
                                                                                min-width: 10rem;">
                                                                            {{totalUSD | currency}}
                                                                        </td>
                                                                    </tr>
                                                                </ng-template>
                                                            </p-table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p-fieldset>
                                        </div>
                                    </div>
                                </div>
                            </p-tabPanel>
                            <p-tabPanel header="Payment Details" class="line-height-3 m-0">
                                <br>
                                <br>
                                <div class="formgrid grid">
                                    <div
                                        class="field col-3"
                                        style="font-size: 11px"
                                    >
                                        <div class="formgrid grid">
                                            <div
                                                class="field col-12"
                                            >
                                                <div class="field">
                                                    <label
                                                        for="currency"
                                                        >Method Of
                                                        Pay</label
                                                    >
                                                    <span
                                                        class="p-float-label"
                                                    >
                                                    <p-dropdown
                                                    appendTo="body"
                                                    [(ngModel)]="
                                                        newPayment.paymentMethod
                                                    "
                                                    [options]="
                                                        paymentMethods
                                                    "
                                                    placeholder="Select Method Of Pay"
                                                >
                                                    <ng-template
                                                        pTemplate="selectedCountry"
                                                    >
                                                        <span
                                                            *ngIf="
                                                                newPayment &&
                                                                newPayment.paymentMethod
                                                            "
                                                            >{{
                                                                newPayment.paymentMethod
                                                            }}
                                                        </span>
                                                    </ng-template>
                                                    <ng-template
                                                        let-option
                                                        pTemplate="item"
                                                    >
                                                        <span>{{
                                                            option
                                                        }}</span>
                                                    </ng-template>
                                                </p-dropdown>
                                                    </span>
                                                </div>
                                            </div>
                                            
                                            <div
                                                class="field col-6"
                                            >
                                                <div class="field">
                                                    <label
                                                        for="currency"
                                                        >Bank</label
                                                    >
                                                    <input
                                                        type="currency"
                                                        pInputText
                                                        id="name"
                                                        [disabled]="
                                                            newPayment.paymentMethod !==
                                                            'Bank Deposit'
                                                        "
                                                        [(ngModel)]="
                                                            newPayment.bank
                                                        "
                                                        required
                                                        autofocus
                                                        placeholder="bank"
                                                        [ngClass]="{
                                                            'ng-invalid ng-dirty':
                                                                submitted &&
                                                                !newPayment.bank
                                                        }"
                                                    />
                                                    <small
                                                        class="ng-dirty ng-invalid"
                                                        style="
                                                            color: red;
                                                        "
                                                        *ngIf="
                                                            submitted &&
                                                            !newPayment.bank
                                                        "
                                                        >Item name
                                                        is required.
                                                    </small>
                                                </div>
                                            </div>
                                            <div
                                                class="field col-6"
                                            >
                                                <div class="field">
                                                    <label
                                                        for="currency"
                                                        >Card
                                                        Number</label
                                                    >
                                                    <input
                                                        type="number"
                                                        pInputText
                                                        id="name"
                                                        [disabled]="
                                                            newPayment.paymentMethod !==
                                                            'Credit Card'
                                                        "
                                                        [(ngModel)]="
                                                            newPayment.cardNo
                                                        "
                                                        required
                                                        autofocus
                                                        placeholder="0000 0000 0000 0000"
                                                        [ngClass]="{
                                                            'ng-invalid ng-dirty':
                                                                submitted &&
                                                                !newPayment.cardNo
                                                        }"
                                                    />
                                                    <small
                                                        class="ng-dirty ng-invalid"
                                                        style="
                                                            color: red;
                                                        "
                                                        *ngIf="
                                                            submitted &&
                                                            !newPayment.cardNo
                                                        "
                                                        >Item name
                                                        is required.
                                                    </small>
                                                </div>
                                            </div>
                                            <div class="field col-6">
                                                <div class="field">
                                                    <span class="p-float-label">
                                                        <p-dropdown appendTo="body" [showClear]="true" [(ngModel)]="
                                                                newPayment.currency
                                                            " inputId="id" [options]="
                                                                currencies
                                                            " placeholder="Select Currency" optionLabel="name">
                                                        </p-dropdown>
                                                        <label for="currency">Currency</label>
                                                    </span>
                                                </div>
                                            </div>
                                            <div
                                                class="field col-6"
                                            >
                                                <div class="field">
                                                    <span class="p-float-label">
                                                        <input type="number" pInputText id="amount" [(ngModel)]="
                                                                newPayment.amount
                                                            " required autofocus [ngClass]="{
                                                                'ng-invalid ng-dirty':
                                                                    submitted &&
                                                                    !newPayment.amount
                                                            }" />
                                                        <small class="ng-dirty ng-invalid" style="color: red" *ngIf="
                                                                submitted &&
                                                                !newPayment.amount
                                                            ">Item name is
                                                            required.</small>
                                                            <label for="name">Amount</label>
                                                    </span>
                                                </div>
                                            </div>

                                            <div
                                                class="field col-12"
                                            >
                                                <div class="field">
                                                    <p-button
                                                        label="Add Payment"
                                                        icon="pi pi-check"
                                                        styleClass="p-button-success"
                                                        (click)="
                                                            createPayment()
                                                        "
                                                        [disabled]="
                                                            !newPayment.amount
                                                        "
                                                    ></p-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="field col-1">
                                        <p-divider
                                            layout="vertical"
                                        ></p-divider>
                                    </div>
                                    <div
                                        class="field col-8"
                                        style="font-size: 12px"
                                    >
                                        <div class="formgrid grid">
                                            <div
                                                class="flex flex-column md:flex-row p-3 w-full"
                                            >
                                                <div
                                                    class="field col-12"
                                                >
                                                    <p-table
                                                        [value]="
                                                            newReservation.payments!
                                                        "
                                                        dataKey="name"
                                                        responsiveLayout="scroll"
                                                        [(selection)]="
                                                            selectedReservationProducts
                                                        "
                                                        selectionMode="multiple"
                                                        [scrollable]="
                                                            true
                                                        "
                                                    >
                                                        <ng-template
                                                            pTemplate="header"
                                                        >
                                                            <tr
                                                                style="
                                                                    height: 0.25rem;
                                                                    font-size: 12px;
                                                                "
                                                            >
                                                                <th
                                                                    pSortableColumn="name"
                                                                >
                                                                    Method
                                                                    Of
                                                                    Pay
                                                                </th>
                                                                <th
                                                                    pSortableColumn="name"
                                                                >
                                                                    Currency
                                                                </th>
                                                                <th
                                                                    pSortableColumn="name"
                                                                >
                                                                    Bank
                                                                </th>
                                                                <th
                                                                    pSortableColumn="cell"
                                                                >
                                                                    Card
                                                                    N#
                                                                </th>
                                                                <th
                                                                    pSortableColumn="name"
                                                                >
                                                                    Amount
                                                                </th>
                                                                <!-- <th></th> -->
                                                            </tr>
                                                        </ng-template>
                                                        <ng-template
                                                            pTemplate="body"
                                                            let-payment
                                                            let-expanded="expanded"
                                                        >
                                                            <tr
                                                                style="
                                                                    height: 0.25rem;
                                                                    font-size: 11px;
                                                                "
                                                            >
                                                                <td
                                                                    style="
                                                                        width: 20%;
                                                                        min-width: 10rem;
                                                                    "
                                                                >
                                                                    <span
                                                                        class="p-column-title"
                                                                        >methodOfPay</span
                                                                    >
                                                                    {{
                                                                        payment.paymentMethod
                                                                    }}
                                                                </td>
                                                                <td
                                                                    style="
                                                                        width: 15%;
                                                                        min-width: 10rem;
                                                                    "
                                                                >
                                                                    <span
                                                                        class="p-column-title"
                                                                        >currencyId</span
                                                                    >
                                                                    {{
                                                                        payment.currency.name
                                                                    }}
                                                                </td>
                                                                <td
                                                                    style="
                                                                        width: 15%;
                                                                        min-width: 10rem;
                                                                    "
                                                                >
                                                                    <span
                                                                        class="p-column-title"
                                                                        >bank</span
                                                                    >
                                                                    {{
                                                                        payment.bank
                                                                    }}
                                                                </td>
                                                                <td
                                                                    style="
                                                                        width: 15%;
                                                                        min-width: 10rem;
                                                                    "
                                                                >
                                                                    <span
                                                                        class="p-column-title"
                                                                        >cardNo</span
                                                                    >
                                                                    {{
                                                                        payment.cardNo
                                                                    }}
                                                                </td>
                                                                <td
                                                                    style="
                                                                        width: 10%;
                                                                        min-width: 10rem;
                                                                    "
                                                                >
                                                                    <span
                                                                        class="p-column-title"
                                                                        >Country</span
                                                                    >
                                                                    {{
                                                                        payment.amount
                                                                            | currency
                                                                    }}
                                                                </td>
                                                            </tr>
                                                        </ng-template>
                                                    </p-table>
                                                    <div
                                                        class="field"
                                                    >
                                                        <div
                                                            class="formgrid grid"
                                                        >
                                                            <div
                                                                class="col-8"
                                                            ></div>
                                                            <div
                                                                class="col-4"
                                                            >
                                                                <p-table>
                                                                    <ng-template
                                                                        pTemplate="header"
                                                                    >
                                                                        <tr>
                                                                            <td>
                                                                                Toatal
                                                                                Amount:
                                                                            </td>
                                                                            <td>
                                                                                {{
                                                                                    totalAmountPaid
                                                                                        | currency
                                                                                            : "USD"
                                                                                }}
                                                                            </td>
                                                                        </tr>
                                                                    </ng-template>
                                                                </p-table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </p-tabPanel>
                        </p-tabView>
                    </ng-template>
                    <ng-template pTemplate="footer">
                        <p-button
                            label="Save"
                            icon="pi pi-check-circle"
                            styleClass="p-button-success"
                            [disabled]="!newReservation.checkOutDate"
                            (click)="Save()"
                        ></p-button>
                        <p-button
                            label="Refresh"
                            icon="pi pi-replay"
                            styleClass="p-button-primary"
                            (click)="hideDialog()"
                        ></p-button>
                    </ng-template>
                </p-dialog>

                <!-------------------------------------------------Edit Booking Modal----------------------------------->

                <!-------------------------------------------------View Booking Modal----------------------------------->
                <p-dialog
                    [(visible)]="viewBookingModal"
                    [style]="{ width: '1200px', height: '550px' }"
                    [modal]="true"
                    class="p-fluid"
                >
                    <p-fieldset legend="View Booking">
                        <ng-template pTemplate="content">
                            <div class="formgrid grid" style="font-size: 14px">
                                <div class="field col-4">
                                    <h4>Firstname:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.firstName }}
                                    </p>
                                    <hr />
                                    <h4>Email:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.email }}
                                    </p>
                                    <hr />
                                    <h4>Nationality:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.country }}
                                    </p>
                                    <hr />
                                </div>
                                <div class="field col-4">
                                    <h4>Last Name:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.lastName }}
                                    </p>
                                    <hr />
                                    <h4>ID Number:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.idNo }}
                                    </p>
                                    <hr />
                                    <h4>CheckIn Date:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.checkInDate | date : "MMMM d, y" }}
                                    </p>
                                    <hr />
                                </div>
                                <div class="field col-4">
                                    <h4>Phone:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.phone }}
                                    </p>
                                    <hr />
                                    <h4>Address:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.address }}
                                    </p>
                                    <hr />
                                    <h4>Check Out Date:</h4>
                                    <p style="color: rgb(5, 5, 95)">
                                        {{ selectedReservation.checkOutDate | date : "MMMM d, y" }}
                                    </p>
                                    <hr />
                                </div>
                            </div>
                        </ng-template>
                    </p-fieldset>
                    <br />
                    <br />
                    <p-fieldset legend="Products">
                        <p-table
                            [value]="selectedReservation.reservationProducts!"
                            dataKey="id"
                            styleClass="p-datatable-striped"
                            [tableStyle]="{ 'min-width': '60rem' }"
                            responsiveLayout="scroll"
                            [(selection)]="selectedReservationProducts"
                            selectionMode="multiple"
                            [scrollable]="true"
                        >
                        <ng-template pTemplate="header">
                            <tr style="height: 0.25rem;font-size: 11px;">
                                <th style="font-size: larger;
                                        background-color: grey;
                                        color: white;">Room Type
                                </th>
                                <th style="font-size: larger;
                                        background-color: grey;
                                        color: white;">Room No
                                </th>
                                <th style="font-size: larger;
                                        background-color: grey;
                                        color: white;">Adult Pax
                                </th>
                                <th style="font-size: larger;
                                        background-color: grey;
                                        color: white;">Child Pax
                                </th>
                                <th style="font-size: larger;
                                        background-color: grey;
                                        color: white;">Unit Cost
                                </th>
                                <th style="font-size: larger;
                                        background-color: grey;
                                        color: white;">Total Amount
                                </th>
                                <!-- <th></th> -->
                            </tr>
                        </ng-template>
                        <!-- reservation products table body -->
                        <ng-template pTemplate="body"
                            let-product>
                            <tr style="height: 0.25rem;
                                    font-size: 11px;">
                                <td style="width: 10%;min-width: 10rem;">
                                    <span class="p-column-title">Room Type</span
                                    >
                                    {{product.roomType}}
                                </td>
                                <td style="width: 5%; min-width: 10rem;">
                                    <span class="p-column-title">Room</span>
                                    {{product.roomId}}
                                </td>
                                <td style="width: 5%;min-width: 10rem;">
                                    <span class="p-column-title">AdultPax</span>
                                    {{product.adultPax}}
                                </td>
                                <td style="width: 5%;min-width: 10rem;">
                                    <span class="p-column-title">child</span>
                                    {{product.childPax}}
                                </td>
                                <td style="width: 5%;min-width: 8rem;">
                                    <span class="p-column-title">UnitCost</span>
                                    {{product.unitPrice | currency}}
                                </td>
                                <td style="width: 10%;min-width: 10rem;">
                                    <span class="p-column-title">TotalAmount</span>
                                    {{product.totalAmount | currency}}
                                </td>
                            </tr>
                        </ng-template>
                        </p-table>
                        <div class="field">
                            <div class="formgrid grid">
                                <div class="col-11"></div>
                                <div class="col-1">
                                    <p-table>
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <td>USD:</td>
                                                <td>
                                                    {{
                                                        selectedReservation.amount
                                                            | currency : "USD"
                                                    }}
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                </div>
                            </div>
                        </div>
                    </p-fieldset>
                </p-dialog>
                <!-------------------------------------------------Supervisor Booking Modal----------------------------------->

                <!-------------------------------------------------Delete Selected Reservation Product Modal----------------------------------->

                <!-------------------------------------------------Delete Selected Reservation Product Modal----------------------------------->

                <!------------------------------------------------- Add TripAccount modal ---------------------------------------------------->
            </div>
        </div>
    </div>
</div>
